<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Pricing Plans - Bootstrap Admin</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="apple-mobile-web-app-capable" content="yes" />    
    
    <link href="./css/bootstrap.min.css" rel="stylesheet" />
    <link href="./css/bootstrap-responsive.min.css" rel="stylesheet" />
    
    
    <link href="./css/font-awesome.css" rel="stylesheet" />
    
    <link href="./css/adminia.css" rel="stylesheet" /> 
    <link href="./css/adminia-responsive.css" rel="stylesheet" /> 
    
    
    <link href="./css/pages/plans.css" rel="stylesheet" /> 
<script type="text/javascript" src="https://cdn.hcharts.cn/jquery/jquery-1.8.3.min.js"></script>
<script src="https://cdn.hcharts.cn/highcharts/5.0.10/highcharts.js"></script>
<script src="https://cdn.hcharts.cn/highcharts/5.0.10/modules/exporting.js"></script>


    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
	
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /></head>

	<script>
	function run(year)
	{
	    return (year%400==0||(year%100!=0&&year%4==0));
	}

	function fun( year, month,day)
	{
	    var ty=year;   //读来的年份
	    var m=month;   //读来的月份
	    if(m<3)
	    {
	        m=12+m;    //1,2月看作去年的13,14月份
	        ty--;
	    }
	    var y=ty%100;           //年份(2位数)
	    var c=ty/100;           //世纪(2位数)
	    var d=day;              //读来的日期
	    var weeks=(y+y/4+c/4-2*c+26*(m+1)/10+d-1)%7;  //得出星期几  (0 星期日,1星期一,6星期六)
	    if( weeks == 0 )weeks = 7;
	    return weeks;
	}


	function deal(year,week)
	{

	    var cnt = (week-1)*7;
	    var month = 1, day = 1;
	    
	    year = parseInt(year);
		week = parseInt(week);
		day = parseInt(day);
		
	    var initDay = fun(year,month,day) ; //获得该年一月一日是星期几
	    
	    initDay = parseInt(initDay);
	    
	    if(initDay == 0){
	    	initDay = 1;
	    }
	    
	    if( initDay != 1 ){
	        year--;
	        month = 12;
	        day = 32;
	    }
	    
	    while( initDay != 1 ){
	        day--;
	        initDay--;
	    }
	    day += cnt;
	    
	    var month_date = [31,28,31,30,31,30,31,31,30,31,30,31];
	    do{
	    	//var year_temp = parseInt(year);
	        if((year%400==0||(year%100!=0&&year%4==0))){
	            month_date[1] = 29;
	        }
	        else month_date[1] = 28;
	        

	        if(day>month_date[month-1]){
	        	day-=month_date[month-1];
	            month++;
	            if(month==13){
	                year++;
	                month=1;
	            }
	        }
	        
	    }while(day>month_date[month-1]);
	    
	    return (year+"-"+month+"-"+day);
	    
	   }

	
	</script>
<body>
<div class="navbar navbar-fixed-top">

		<div class="navbar-inner">

			<div class="container">

				<a class="btn btn-navbar" data-toggle="collapse"
					data-target=".nav-collapse"> <span class="icon-bar"></span> <span
					class="icon-bar"></span> <span class="icon-bar"></span>
				</a> <a class="brand" href="./">GodEyes</a>

				<div class="nav-collapse">

					<ul class="nav pull-right">
						<li><a href="#"><span class="badge badge-warning">7</span></a>
						</li>

						<li class="divider-vertical"></li>

						<li class="dropdown"><a data-toggle="dropdown"
							class="dropdown-toggle " href="#"> Crazy11586 <b
								class="caret"></b>
						</a>

							<ul class="dropdown-menu">
								<li><a href="./account.html"><i class="icon-user"></i>
										None </a></li>

								<li><a href="./change_password.html"><i
										class="icon-lock"></i> None</a></li>

								<li class="divider"></li>

								<li><a href="./"><i class="icon-off"></i> None</a></li>
							</ul></li>
					</ul>

				</div>
				<!-- /nav-collapse -->

			</div>
			<!-- /container -->

		</div>
		<!-- /navbar-inner -->

	</div>
	<!-- /navbar -->




<div id="content">
	
	<div class="container">
		
		<div class="row">
			
			<div class="span3">

					<div class="account-container">

						<div class="account-avatar">
							<img src="./img/headshot.png" alt="" class="thumbnail" />
						</div>
						<!-- /account-avatar -->

						<div class="account-details">

							<span class="account-name">Crazy11586</span> <span
								class="account-role">管理员</span> <span
								class="account-actions"> <a href="javascript:;">切换用户</a>
								| <a href="javascript:;">资料设置</a>
							</span>

						</div>
						<!-- /account-details -->

					</div>
					<!-- /account-container -->

					<hr />

					<ul id="main-nav" class="nav nav-tabs nav-stacked">

						<li ><a href="./index.jsp"> <i class="icon-home"></i>
								客流管理
						</a></li>
						
						<li><a href="./OldAndNew.html"> <i class="icon-pushpin"></i>
								新老顾客
						</a></li>
 						<li  class="active"
 						><a href="./customerStay.html"> <i class="icon-signal"></i>
								驻留分析
						</a></li>
						<li><a href="./customerDirection.html"> <i class="icon-th-list"></i>
								客流趋势
						</a></li>

						<li> <a href="./deviceAdmin.html"> <i class="icon-th-large"></i>
								设备管理
						</a></li>

						<li><a href="./account.html"> <i class="icon-user"></i>
								资料设置
						</a></li>

						<li><a href="./login.html"> <i class="icon-lock"></i>
								切换
						</a></li>

					</ul>

					<hr />

					<br />

				</div>
				<!-- /span3 -->
			
			
			
			<div class="span9">
				
				<h1 class="page-title">
					<i class="icon-th-list"></i>
					驻留分析					
				</h1>
	
				<script type="text/javascript">
				 
		
		
		function getStore(){
			  var url_at = "http://47.94.104.25:8080/Test01/GetDataAction?action=getStore"; 
		      //清空原有select内的数据
		      $("#my_store_plans").empty();
		      
		      $.ajax({ 
		          url:url_at , 
		          type:"post" , 
		          dataType:"json",
		          success:function(data){   
		        	  
		              var count = 1;
		              
		              $.each(data, function (index, item) {
		            	  
		                  var id = count++; 
		                  var text = data[index].store_name; 
		                  
		                  $("#my_store_plans").append("<option value='"+id+"'>"+text+"</option>");       
		                 
		              }); 
		          }, 
		      error:function(XMLHttpRequest,textStatus, errorThrown) { 
		           alert(errorThrown);
		         }
		      });   
		}
		
		getStore();
		</script>
				
				<div class="widget">
				
					<div class="widget-header">
							<i class="icon-signal"></i>
							<h3>店铺 : </h3>
							<select id="my_store_plans" class="cs-select cs-skin-rotate" style="margin:auto 0">
							  
							</select>

					</div>
					
					<script type="text/javascript">
					 
						 
						 
					
					 
					
					</script>
					
														
				<div class="widget-content">
				
					<h4>日期筛选&nbsp;:</h4>
					
					<input id="day_radio" type="radio" name="pick_time" value="1" checked style="margin-left : 30px">按日筛选</input>
					<input id="week_radio" type="radio" name="pick_time" value="0"  style="margin-left : 30px">按周筛选</input>
					<input id="last_week_radio" type="radio" name="pick_time" value="2"  style="margin-left : 30px">过去七天</input>
					<input id="last_month_radio" type="radio" name="pick_time" value="3"  style="margin-left : 30px">过去一个月</input>
					<input id="custom_radio" type="radio" name="pick_time" value="4"  style="margin-left : 30px">自定义区域</input>
					<br />
					<input id="week"  style="display: none;margin-left:30px;margin-top:8px "type="week" value="2017-W24" min="2017-W24" max="2018-W24"/>	
					<input id="day"
								style=" margin-left: 30px; margin-top: 8px"
								type="date" value="2017-06-15" min="2017-06-15" max="2018-06-15" />
					<input id="custom_from"
								style="display: none; margin-left: 30px; margin-top: 8px"
								type="date" value="2017-06-15" min="2017-06-15" max="2018-06-15" />
					<input id="custom_to"
								style="display: none; margin-left: 30px; margin-top: 8px"
								type="date" value="2017-06-15" min="2017-06-15" max="2018-06-15" />
							<hr />
					
					<div id="container" style="min-width: 310px; height: 436px; max-width: 870px; margin: 0 auto"></div>
				
				</div> <!-- /widget-content -->
					
				<script>
					var time = 1507248000000;
			        var chart;
			        
			        $(function () {

						init();check();
			        	$(":radio").click(function(){	   		
					   		check();
					  	});
			        	
					    chart = Highcharts.chart('container', {
					        chart: {
					            zoomType: 'xy'
					        },
					        title: {
					            text: '客户入店情况统计表'
					        },credits: {
						          enabled:false
							},
							exporting: {
					            enabled:false
							},
					        subtitle: {
					        },
					        xAxis: [{
					            categories: [],
					            crosshair: true
					        }],
					        yAxis: [{ // Primary yAxis
					            labels: {
					                format: '{value} %',
					                style: {
					                    color: Highcharts.getOptions().colors[1]
					                }
					            },
					            title: {
					                text: '',
					                style: {
					                    color: Highcharts.getOptions().colors[1]
					                }
					            },
					            min : 0,
					            tickInterval : 1
					        }, { // Secondary yAxis
					            title: {
					                text: '',
					                style: {
					                    color: Highcharts.getOptions().colors[0]
					                }
					            },
					            labels: {
					                format: '{value} s',
					                style: {
					                    color: Highcharts.getOptions().colors[0]
					                }
					            },
					            opposite: true
					        }],
					        tooltip: {
					            shared: true
					        },
					        legend: {
					            layout: 'horizontal',
					            align: 'left',
					            x: 10,
					            verticalAlign: 'top',
					            y: 0,
					            floating: true,
					            backgroundColor: (Highcharts.theme && Highcharts.theme.legendBackgroundColor) || '#FFFFFF'
					        },
					        series: [{
					            name: '驻店时间',
					            type: 'column',
					            yAxis: 1,
					            data: [],
					            tooltip: {
					                valueSuffix: 's'
					            }
					        }, {
					            name: '深访率',
					            type: 'spline',
					            data: [],
					            tooltip: {
					                valueSuffix: '%'
					            }
					        }, {
					            name: '跳出率',
					            type: 'spline',
					            data: [],
					            tooltip: {
					                valueSuffix: '%'
					            }
					        }]
					    });

					
					    $("#day").change(function(){
							check();
						});
						$("#custom_from").change(function(){
							resetday();
						});
						$("#custom_to").change(function(){
							refresh();
						});
						
						function getNowFormatDate() {
						    var date = new Date();
						    var seperator1 = "-";
						    var month = date.getMonth() + 1;
						    var strDate = date.getDate();
						    if (month >= 1 && month <= 9) {
						        month = "0" + month;
						    }
						    if (strDate >= 0 && strDate <= 9) {
						        strDate = "0" + strDate;
						    }
						    var currentdate = date.getFullYear() + seperator1 + month + seperator1 + strDate
						      ;
						    return currentdate;
						}

						function init(){
							var str = getNowFormatDate();
							
							$("#day").attr("value",str);
						 	//$("#week").attr("value",addDate(str));
							$("#custom_from").attr("value",str);
						 	$("#custom_to").attr("value",addDate(str));
						 	//2017-W24
						 	var str = getNowFormatDate();
						 	var kk = str.split("-");
						 	$("#week").attr("value",kk[0]+"-W"+getYearWeek(kk[0],kk[1],kk[2]));
						}
						
						function check(){
								
								if($('input:radio[id="day_radio"]:checked').val()){
									$("#day").show();
									$("#week").hide();
									$("#custom_to").hide();
									$("#custom_from").hide();
									 var str = $("#day").val();
									 str+=" 00:00:00"
									 var timestamp2 = Date.parse(new Date(str));
									// console.log(timestamp2+""+(timestamp2+1000*60*60*24-1));
									 f1(timestamp2,(timestamp2+1000*60*60*24-1));
									
								 }else if($('input:radio[id="week_radio"]:checked').val()){
									 	$("#day").hide();
										$("#week").show();
										$("#custom_to").hide();
										$("#custom_from").hide();
									 var str = $("#week").val();
									 var str_year = str.substring(0,4);
									 var str_week = str.substring(6,str.length);
									 var timestamp = deal(str_year,str_week);
									
									 var timestamp2 = Date.parse(new Date(timestamp));
									 console.log(timestamp2+"--"+(timestamp2+1000*60*60*24*6));
									 f1(timestamp2,(timestamp2+1000*60*60*24*6));
									 
								 }else if($('input:radio[id="last_week_radio"]:checked').val()){
									 	$("#day").hide();
										$("#week").hide();
										$("#custom_to").hide();
										$("#custom_from").hide();
										
										var str = getNowFormatDate();
										f1(Date.parse(new Date(addDate(str,-7))),Date.parse(new Date(str)));
									 
								 }else if($('input:radio[id="last_month_radio"]:checked').val()){
									 alert('last_month');
									 $("#day").hide();
									 $("#week").hide();
									 $("#custom_to").hide();
									 $("#custom_from").hide();

									var str = getNowFormatDate();
									f1(Date.parse(new Date(addDate(str,-30))),Date.parse(new Date(str)));
									 
								 }else if($('input:radio[id="custom_radio"]:checked').val()){
								
									 $("#day").hide();
									 $("#week").hide();
									 $("#custom_from").show();
									 $("#custom_to").show();
									 resetday();
									 
								 }
							 }
						function getYearWeek(a, b, c) {
						    //date1是当前日期
						    //date2是当年第一天
						    //d是当前日期是今年第多少天
						    //用d + 当前年的第一天的周差距的和在除以7就是本年第几周
						    var date1 = new Date(a, parseInt(b) - 1, c), date2 = new Date(a, 0, 1),
						        d = Math.round((date1.valueOf() - date2.valueOf()) / 86400000);
						    return Math.ceil((d + ((date2.getDay() + 1) - 1)) / 7);
						};
						
						function refresh(){
							 var from = $("#custom_from").val()+" 00:00:00";
							 var to = $("#custom_to").val()+" 00:00:00";
							 var timestamp2 = Date.parse(new Date(from));
							 var timestamp3 = Date.parse(new Date(to));
							 f1(timestamp2,timestamp3-1);
						}
						
						function resetday(){
							var str = $("#custom_from").val();
							 $("#custom_to").attr("min",addDate(str));
							 $("#custom_to").attr("value",addDate(str));
							 refresh();
						}
						// 日期，在原有日期基础上，增加days天数，默认增加1天
				        function addDate(date, days) {
				            if (days == undefined || days == '') {
				                days = 1;
				            }
				            var date = new Date(date);
				            date.setDate(date.getDate() + days);
				            var month = date.getMonth() + 1;
				            var day = date.getDate();
				            return date.getFullYear() + '-' + getFormatDate(month) + '-' + getFormatDate(day);
				        }
				     // 日期月份/天的显示，如果是1位数，则在前面加上'0'
				        function getFormatDate(arg) {
				            if (arg == undefined || arg == '') {
				                return '';
				            }

				            var re = arg + '';
				            if (re.length < 2) {
				                re = '0' + re;
				            }

				            return re;
				        }
					 
				function ge_time_format2all(timestamp){
					if(timestamp){
						var date = new Date(timestamp);
					}else{
						var date = new Date();
					}
					Y = date.getFullYear(),
					m = date.getMonth()+1,
					d = date.getDate();
					var h = date.getHours(); 
					var M = date.getMinutes(); 
					var s = date.getSeconds();
					if(m<10){
							m = '0'+m;
					}
					if(d<10){
						d = '0'+d;
					}
					if(h<10){
						h = '0'+h;
					}
					if(M<10){
						M = '0'+M;
					}
					if(s<10){
						s = '0'+s;
					}
			
						var t = Y+'-'+m+'-'+d+' '+h+':'+M+':'+s;
						return t;
					}
					 
				function ge_time_format(timestamp){
					if(timestamp){
						var date = new Date(timestamp);
					}else{
						var date = new Date();
					}
					Y = date.getFullYear(),
					m = date.getMonth()+1,
					d = date.getDate();
					if(m<10){
						m = '0'+m;
					}
					if(d<10){
						d = '0'+d;
					}
		
					var t = Y+'-'+m+'-'+d;
					return t;
				}
				
				function ge_time_format2hour(timestamp){
					if(timestamp){
						var date = new Date(timestamp);
					}else{
						var date = new Date();
					}
					
					var h = date.getHours(); 
					var m = date.getMinutes(); 
					var s = date.getSeconds();
					
					if(h<10){
						h = '0'+h;
					}
					if(m<10){
						m = '0'+m;
					}
		
					var t = h+':'+m;
					return t;
				}

				function f1( time1 , time2 ){
					getCustomer(time1,time2);
				    RefreshData(time1,time2);
				    
				}
				
				
				function RefreshData(time1,time2){
					
					var i;
					var categories = [] ;
				    var count ;
				    var type ;
					if(time2-time1 > 86499999){
						 count = 0 ;
				    	 console.log('month');
				    	 for( i= parseInt(time1); i <= parseInt(time2) ; i+=86400000){
				    		 categories[count++] = i;
					     }
				    	 type = "month";
				     }else{
				    	 console.log('day');
				    	 
				    	 i =parseInt(time1);
				    	 count = 0 ;
				    	 for( i= parseInt(time1) ; i <= parseInt(time2) ; i+=3600000){
				    		 categories[count++] =i;
				    	 }

				    	 type = "day";
				     }
					console.log(categories);
					
					$.ajax({
						url: 'http://47.94.104.25:8080/Test01/GetDataAction?action=getrate',
						type: 'POST',
						cache: false,
						success: function (data1) {
							//var json = eval(data);
							var data = [];
							var data2 = [];

							var data3 = [];
							var cate = [];
							console.log(data1);
							var size_alltime = [];
							var size_outrate= [];
							var size_inrate= [];
							var count ; 
							
							for( count = 0 ; count<categories.length ; count++){
								size_alltime[count] = 0;
								size_outrate[count] = 0;
								size_inrate[count] = 0;
							}
							
							 $.each(data1, function (index, item) {
								 
								 	var alltime = parseInt(data1[index][2]);
								 	
								 	var count = parseInt(data1[index][1]);
					                var allconsumer = parseInt(data1[index][3]);		                  
					                var outrate = ((count/allconsumer*100)+"").substring(0,5);
					                
					                var Range = allconsumer - outrate;
					                var Rand = Math.random();
					                var in1 =  Math.floor(Rand * Range); //舍去
					                
					                if(	in1*2 > allconsumer){
					                	  in1 = in1 /2;
					                }
					                
					                var inrate = ((in1/allconsumer*100)+"").substring(0,5);
				 
					                var index2 = lowerBound(categories,0,categories.length-1,data1[index][0])-1;
					                
					                size_alltime[index2] = size_alltime[index2]+alltime;
					                size_outrate[index2] = (size_outrate[index2]+parseFloat(outrate))/2;
					                size_inrate[index2] = (size_inrate[index2]+parseFloat(inrate))/2;
							 
							 });
							
							 console.log(size_alltime);
							 console.log(size_outrate);
							 console.log(size_inrate);
							 /*
		                    for( var index = 0 ; index <json.length ; index ++  ){
		                    	
		                    	  var time = parseInt(json[index][0]);
		                    	  
				                  var alltime = parseInt(json[index][2]);
				                  
				                  
				                  var count = parseInt(json[index][1]);
				                  var allconsumer = parseInt(json[index][3]);		                  
				                  var outrate = (count/allconsumer*100)+""	;

				                  var Range = allconsumer - outrate;
				                  var Rand = Math.random();
				                  var in1 =  Math.floor(Rand * Range); //舍去
				                  if(	in1*2 > allconsumer){
				                	  in1 = in1 /2;
				                  }
				                  var inrate = (in1/allconsumer*100)+""	;
				                  
				                  console.log(inrate+" "+outrate);
				                  
		                        	 data.push(alltime);
		                             
		                           		if(parseFloat(inrate.substring(0,5))<0){
		                           			data2.push(-1*parseFloat(inrate.substring(0,5)));
		                           		}else{
		                           			data2.push(parseFloat(inrate.substring(0,5)));
		                           		}
		                             data3.push(parseFloat(outrate.substring(0,5)));
			                         cate.push(time);
			                         
		                     }
							
		                    
		                    chart.xAxis[0].categories = [];
							for(var j=0;j<cate.length;j++){
							    if(cate[j] == ".."){
							        chart.xAxis[0].categories.push(" ");
							    }else{
							    	if(json.length>24){
							    		chart.xAxis[0].categories.push(ge_time_format(parseInt(cate[j])));
							    	}else{
							   			chart.xAxis[0].categories.push(ge_time_format2hour(parseInt(cate[j])));
							    	}
							    }
							}

							*/
							
							 var index;
				              
				            	if(type == "day"){
				              
						           for( index = 0; index<categories.length ; index++){
					                      
						            	  categories[index] = ge_time_format2hour(categories[index]);
					                     
						           }
						              
				            	}else {
				            		
				            	
				            		for( index = 0; index<categories.length ; index++){
					                      
						            	  categories[index] = ge_time_format(categories[index]);
					                  
						           }
				            	}
				              
				            	
				              
				              for(count = 0 ; count < categories.length ; count ++){
				            	  data.push([categories[count],size_alltime[count]]);
			                      data2.push([categories[count],size_inrate[count]]);
			                      data3.push([categories[count],size_outrate[count]]);
				              }
							
							chart.xAxis[0].categories = categories;
							
							chart.series[0].setData(data);
							chart.series[1].setData(data2);
							chart.series[2].setData(data3);
		                    chart.setTitle("asdads");
		                   // JSInterface.javaFunction('Length  '+chart.xAxis[0].categories[1]+" "+ chart.xAxis[0].categories.length);
		                    chart.redraw();
		                   // JSInterface.javaFunction('Length  '+cate[0]+ ' '+ cate[10]);
						}
						});
		            }
				
				function lowerBound(datas, left , right , data){
					
					left = parseInt(left);
					right = parseInt(right);
					data = parseInt(data);
					console.log(left+" "+right+" "+data);
					while(left < right){

						var m  = left+(right-left)/2;
						m = parseInt(m);
						if(datas[m] >= data){
							
							right = m ;
							
						}else if(datas[m] < data){
							
							left = m +1;
							
						}
						
					}
					console.log("final"+left)
					
					return left;
					
				}
					
				
					
					function getCustomer(time1,time2){
						//  var url_at = "http://47.94.104.25:1314/Test01/GetDataAction?action=getCustomerCount2time&time1="+time1+"&time2="+time2; 
					      //清空原有select内的数据
					      $("#customerbody").empty();
					      
					      
					      var str = 'http://47.94.104.25:8080/Test01/GetDataAction?action=getrate';
					      $.ajax({ 
					    	  //http://47.94.104.25:1314/Test01/GetDataAction?action=getall&time1=1496804400000&time2=149http://47.94.104.25:8080/Test01/GetDataAction?action=getrate6807999000
					    	  url: str, 
					          type:"post" , 
					          dataType:"json",
					          success:function(data){
					            //  $("#my_store").append("<option value='-1'>--请选择需要展示的店铺--</option>");	           
					              var count2 = 1;
					            //  alert(data);
					              $.each(data, function (index, item) {
					            	//  alert("yes");
					                  var id = count2++; 

					                  var time = parseInt("0"+data[index][0]);
					                  var count = parseInt("0"+data[index][1]);
					                  var alltime = parseInt("0"+data[index][2]);
					                  var allconsumer = parseInt(data[index][3]);
					                  var outrate;
					                  if(allconsumer != 0){
					                	  outrate=(count/allconsumer*100)+"";
					                  }else{
					                	  outrate = "0";
					                  }
					                  
					                  var Range = allconsumer - outrate;
					                  var Rand = Math.random();
					                  var in1 =  Math.floor(Rand * Range); //舍去
					                 
					             
					                  if(	in1*2 > allconsumer){
					                	  in1 = in1 /2;
					                  }
					                  var inrate;
					                  if(allconsumer != 0){
					                	  inrate=(in1/allconsumer*100)+""
					                  }else{
					                	  inrate = "0";
					                  }

					                  var number1  ="<td style=\"text-align:center\">"+id+"</td>";
					                  var time1 = "<td style=\"text-align:center\">"+ge_time_format2all(time)+"</td>";
					                  var count1 = "<td style=\"text-align:center\">"+count+"</td>";
					                  var alltime1 = "<td style=\"text-align:center\">"+alltime+"</td>";
					                  var allconsumer1 = "<td style=\"text-align:center\">"+allconsumer+"</td>";
					                  var outrate1 = "<td style=\"text-align:center\">"+outrate.substring(0,5)+"% </td>";
					                  var inrate1 = "<td style=\"text-align:center\">"+inrate.substring(0,5)+"% </td>";
					                  var cl = "<td class=\"action-td\" style=\"text-align:center\"><a href=\"javascript:;\" class=\"btn btn-small btn-warning\"> <i class=\"icon-ok\"></i> </a> <a href=\"javascript:;\" class=\"btn btn-small\"> <i class=\"icon-remove\"></i></a></td>";
					                  
					                  var html = "<tr>"+number1+""+time1+""+
					                  count1+""+alltime1+""+allconsumer1+""+outrate1+""+inrate1+""+cl+"</tr>";
					                  
					                  $("#customerbody").append(html);
			           
					              }); 
					          }, 
					      error:function(XMLHttpRequest,textStatus, errorThrown) { 
					           alert(errorThrown);
					         }
					      });   
					}
			        });
				</script>
								
			</div> <!-- /widget -->



				<div class="widget widget-table">
					
					<div class="widget-header">
						<h3>数据详情</h3>
					</div> <!-- /widget-header -->
														
					<div class="widget-content">
					<table class="table table-striped table-bordered" >
								<thead>
									<tr>
										<th style="width:40px; text-align:center">#</th>
										<th style="text-align:center">扫描时间</th>
										<th style="text-align:center">跳出人数</th>
										<th style="text-align:center">累计驻店(跳出)</th>
										<th style="text-align:center">店内人数</th>
										<th style="text-align:center">跳出率</th>
										<th style="text-align:center">深访率</th>
										<th>&nbsp;</th>
									</tr>
								</thead>

								<tbody id="customerbody">
								
								
								</tbody>
							</table>
					</div> <!-- /widget-content -->
					
				</div> <!-- /widget -->
				
				
				
			</div> <!-- /span9 -->
			
			
		</div> <!-- /row -->
		
	</div> <!-- /container -->
	
</div> <!-- /content -->
					
	
<div id="footer">

</div> <!-- /footer -->

<script src="./js/bootstrap.js"></script>

  </body>
</html>
